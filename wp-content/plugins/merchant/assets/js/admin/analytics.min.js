function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ownKeys(e,t){var a,n=Object.keys(e);return Object.getOwnPropertySymbols&&(a=Object.getOwnPropertySymbols(e),t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)),n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(a),!0).forEach(function(t){_defineProperty(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ownKeys(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function _defineProperty(t,e,a){return(e=_toPropertyKey(e))in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function _toPropertyKey(t){t=_toPrimitive(t,"string");return"symbol"==_typeof(t)?t:t+""}function _toPrimitive(t,e){if("object"!=_typeof(t)||!t)return t;var a=t[Symbol.toPrimitive];if(void 0===a)return("string"===e?String:Number)(t);a=a.call(t,e||"default");if("object"!=_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_unsupportedIterableToArray(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){var a;if(t)return"string"==typeof t?_arrayLikeToArray(t,e):"Map"===(a="Object"===(a={}.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:a)||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(t,e):void 0}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=Array(e);a<e;a++)n[a]=t[a];return n}function _iterableToArrayLimit(t,e){var a=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=a){var n,r,o,i,s=[],c=!0,l=!1;try{if(o=(a=a.call(t)).next,0===e){if(Object(a)!==a)return;c=!1}else for(;!(c=(n=o.call(a)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){l=!0,r=t}finally{try{if(!c&&null!=a.return&&(i=a.return(),Object(i)!==i))return}finally{if(l)throw r}}return s}}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _regeneratorRuntime(){_regeneratorRuntime=function(){return i};var l,i={},t=Object.prototype,c=t.hasOwnProperty,e="function"==typeof Symbol?Symbol:{},n=e.iterator||"@@iterator",a=e.asyncIterator||"@@asyncIterator",r=e.toStringTag||"@@toStringTag";function d(t,e,a,n){return Object.defineProperty(t,e,{value:a,enumerable:!n,configurable:!n,writable:!n})}try{d({},"")}catch(l){d=function(t,e,a){return t[e]=a}}function s(t,e,a,n){var r,o,i,s,e=e&&e.prototype instanceof p?e:p,e=Object.create(e.prototype);return d(e,"_invoke",(r=t,o=a,i=new _(n||[]),s=1,function(t,e){if(3===s)throw Error("Generator is already running");if(4===s){if("throw"===t)throw e;return{value:l,done:!0}}for(i.method=t,i.arg=e;;){var a=i.delegate;if(a){a=function t(e,a){var n=a.method,r=e.i[n];if(r===l)return a.delegate=null,"throw"===n&&e.i.return&&(a.method="return",a.arg=l,t(e,a),"throw"===a.method)||"return"!==n&&(a.method="throw",a.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;n=u(r,e.i,a.arg);if("throw"===n.type)return a.method="throw",a.arg=n.arg,a.delegate=null,h;r=n.arg;return r?r.done?(a[e.r]=r.value,a.next=e.n,"return"!==a.method&&(a.method="next",a.arg=l),a.delegate=null,h):r:(a.method="throw",a.arg=new TypeError("iterator result is not an object"),a.delegate=null,h)}(a,i);if(a){if(a===h)continue;return a}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(1===s)throw s=4,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);s=3;a=u(r,o,i);if("normal"===a.type){if(s=i.done?4:2,a.arg===h)continue;return{value:a.arg,done:i.done}}"throw"===a.type&&(s=4,i.method="throw",i.arg=a.arg)}}),!0),e}function u(t,e,a){try{return{type:"normal",arg:t.call(e,a)}}catch(t){return{type:"throw",arg:t}}}i.wrap=s;var h={};function p(){}function o(){}function f(){}var e={},g=(d(e,n,function(){return this}),Object.getPrototypeOf),g=g&&g(g(x([]))),m=(g&&g!==t&&c.call(g,n)&&(e=g),f.prototype=p.prototype=Object.create(e));function v(t){["next","throw","return"].forEach(function(e){d(t,e,function(t){return this._invoke(e,t)})})}function y(i,s){var e;d(this,"_invoke",function(a,n){function t(){return new s(function(t,e){!function e(t,a,n,r){var o,t=u(i[t],i,a);if("throw"!==t.type)return(a=(o=t.arg).value)&&"object"==_typeof(a)&&c.call(a,"__await")?s.resolve(a.__await).then(function(t){e("next",t,n,r)},function(t){e("throw",t,n,r)}):s.resolve(a).then(function(t){o.value=t,n(o)},function(t){return e("throw",t,n,r)});r(t.arg)}(a,n,t,e)})}return e=e?e.then(t,t):t()},!0)}function b(t){this.tryEntries.push(t)}function w(t){var e=t[4]||{};e.type="normal",e.arg=l,t[4]=e}function _(t){this.tryEntries=[[-1]],t.forEach(b,this),this.reset(!0)}function x(e){if(null!=e){var a,t=e[n];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return a=-1,(t=function t(){for(;++a<e.length;)if(c.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=l,t.done=!0,t}).next=t}throw new TypeError(_typeof(e)+" is not iterable")}return d(m,"constructor",o.prototype=f),d(f,"constructor",o),o.displayName=d(f,r,"GeneratorFunction"),i.isGeneratorFunction=function(t){t="function"==typeof t&&t.constructor;return!!t&&(t===o||"GeneratorFunction"===(t.displayName||t.name))},i.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,d(t,r,"GeneratorFunction")),t.prototype=Object.create(m),t},i.awrap=function(t){return{__await:t}},v(y.prototype),d(y.prototype,a,function(){return this}),i.AsyncIterator=y,i.async=function(t,e,a,n,r){void 0===r&&(r=Promise);var o=new y(s(t,e,a,n),r);return i.isGeneratorFunction(e)?o:o.next().then(function(t){return t.done?t.value:o.next()})},v(m),d(m,r,"Generator"),d(m,n,function(){return this}),d(m,"toString",function(){return"[object Generator]"}),i.keys=function(t){var e,a=Object(t),n=[];for(e in a)n.unshift(e);return function t(){for(;n.length;)if((e=n.pop())in a)return t.value=e,t.done=!1,t;return t.done=!0,t}},i.values=x,_.prototype={constructor:_,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=l,this.done=!1,this.delegate=null,this.method="next",this.arg=l,this.tryEntries.forEach(w),!t)for(var e in this)"t"===e.charAt(0)&&c.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=l)},stop:function(){this.done=!0;var t=this.tryEntries[0][4];if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var a=this;function t(t){o.type="throw",o.arg=e,a.next=t}for(var n=a.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n],o=r[4],i=this.prev,s=r[1],c=r[2];if(-1===r[0])return t("end"),!1;if(!s&&!c)throw Error("try statement without catch or finally");if(null!=r[0]&&r[0]<=i){if(i<s)return this.method="next",this.arg=l,t(s),!0;if(i<c)return t(c),!1}}},abrupt:function(t,e){for(var a=this.tryEntries.length-1;0<=a;--a){var n=this.tryEntries[a];if(-1<n[0]&&n[0]<=this.prev&&this.prev<n[2]){var r=n;break}}var o=(r=r&&("break"===t||"continue"===t)&&r[0]<=e&&e<=r[2]?null:r)?r[4]:{};return o.type=t,o.arg=e,r?(this.method="next",this.next=r[2],h):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var a=this.tryEntries[e];if(a[2]===t)return this.complete(a[4],a[3]),w(a),h}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var a,n,r=this.tryEntries[e];if(r[0]===t)return"throw"===(a=r[4]).type&&(n=a.arg,w(r)),n}throw Error("illegal catch attempt")},delegateYield:function(t,e,a){return this.delegate={i:x(t),r:e,n:a},"next"===this.method&&(this.arg=l),h}},i}function asyncGeneratorStep(t,e,a,n,r,o,i){try{var s=t[o](i),c=s.value}catch(t){return void a(t)}s.done?e(c):Promise.resolve(c).then(n,r)}function _asyncToGenerator(s){return function(){var t=this,i=arguments;return new Promise(function(e,a){var n=s.apply(t,i);function r(t){asyncGeneratorStep(n,e,a,r,o,"next",t)}function o(t){asyncGeneratorStep(n,e,a,r,o,"throw",t)}r(void 0)})}}(l=>{var n,e,a,r,o,i,s,c,d={AJAX_URL:merchant_analytics.ajax_url,NONCE:merchant_analytics.nonce,impressionsChart:null,revenueChart:null,avgOrderValChart:null,columnChartOptions:{series:[{data:[]}],noData:{text:"No data available",align:"center",verticalAlign:"middle",offsetX:0,offsetY:0,style:{color:"#686868",fontSize:"18px"}},chart:{type:"bar",height:350,stacked:!1,toolbar:{show:!1,offsetX:-10,offsetY:10,tools:{download:!1,selection:!0,zoom:!0,zoomin:!0,zoomout:!0,pan:!1,reset:!0}},zoom:{enabled:!1,allowMouseWheelZoom:!1}},plotOptions:{bar:{columnWidth:"20%",borderRadius:5,borderRadiusApplication:"end",colors:{backgroundBarColors:["#ebeffd"],backgroundBarRadius:4}}},colors:["#3A63E9"],dataLabels:{enabled:!1},grid:{show:!0,borderColor:"#D8D8D8",strokeDashArray:5,position:"back",xaxis:{lines:{show:!0,offsetX:60,style:{dashArray:5}}},yaxis:{lines:{show:!1}}},xaxis:{axisTicks:{show:!1},axisBorder:{show:!0,color:"#D8D8D8",height:1}},tooltip:{enabled:!1}},revenueChartOptions:{series:[{data:[]}],noData:{text:"No data available",align:"center",verticalAlign:"middle",offsetX:0,offsetY:0,style:{color:"#686868",fontSize:"18px"}},legend:{show:!1},chart:{type:"area",height:350,stacked:!1,toolbar:{show:!1,offsetX:-10,offsetY:10,tools:{download:!1,selection:!0,zoom:!0,zoomin:!0,zoomout:!0,pan:!1,reset:!0}},zoom:{enabled:!1,allowMouseWheelZoom:!1}},stroke:{curve:"smooth",dashArray:6,width:2,lineCap:"round"},fill:{type:"gradient",gradient:{inverseColors:!1,opacityFrom:.55,opacityTo:.05,stops:[10,100]}},markers:{size:5,colors:["#fff"],strokeColors:"#3A63E9",strokeWidth:2,hover:{size:6}},colors:["#3A63E9","#393939"],dataLabels:{enabled:!1},grid:{show:!0,borderColor:"#D8D8D8",strokeDashArray:5,position:"back",xaxis:{lines:{show:!0,offsetX:60,style:{dashArray:5}}},yaxis:{lines:{show:!1}}},xaxis:{axisTicks:{show:!1},axisBorder:{show:!0,color:"#D8D8D8",height:1},tooltip:{enabled:!1}},tooltip:{fixed:{offsetX:0,offsetY:0},enabled:!0,theme:!1,custom:function(t){t.series;t=t.w.globals.initialSeries[t.seriesIndex].data[t.dataPointIndex];return'\n                        <div class="arrow-box">\n                            <div class="box-wrapper">\n                                <div class="box-column big">\n                                    <div class="head">\n                                        <div class="box-title">Total Income</div>\n                                        <div class="box-value">'.concat(t.number_currency,'</div>\n                                    </div>\n                                    <div class="orders-count">\n                                        <strong>').concat(t.orders_count,"</strong> ").concat(merchant_analytics.labels.orders,'\n                                    </div>\n                                </div>\n                                <div class="separator"></div>\n                                <div class="box-column small">\n                                    <div class="head">\n                                        <svg width="64" height="47" viewBox="0 0 64 41" fill="none" xmlns="http://www.w3.org/2000/svg">\n                                            \x3c!-- SVG content --\x3e\n                                        </svg>\n                                    </div>\n                                    <div class="change-percentage ').concat(t.diff_type,'">\n                                        <strong>').concat(t.difference,"%</strong>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>")}}},widgetChartOptions:{series:[{data:[]}],noData:{text:"No data available",align:"center",verticalAlign:"middle",offsetX:0,offsetY:0,style:{color:"#686868",fontSize:"18px"}},legend:{show:!1},chart:{type:"area",height:350,stacked:!1,toolbar:{show:!1,offsetX:-10,offsetY:10,tools:{download:!1,selection:!0,zoom:!0,zoomin:!0,zoomout:!0,pan:!1,reset:!0}},zoom:{enabled:!1,allowMouseWheelZoom:!1}},stroke:{curve:"smooth",width:2,lineCap:"round"},fill:{type:"gradient",colors:["#3A63E9"],gradient:{inverseColors:!1,opacityFrom:.55,opacityTo:.15,stops:[10,100]}},colors:["#3A63E9"],dataLabels:{enabled:!1},grid:{show:!0,borderColor:"#D8D8D8",strokeDashArray:5,position:"back",xaxis:{lines:{show:!0,offsetX:60,style:{dashArray:5}}},yaxis:{lines:{show:!1}}},xaxis:{axisTicks:{show:!1},axisBorder:{show:!0,color:"#D8D8D8",height:1},tooltip:{enabled:!1}},tooltip:{enabled:!1}},avgOrderValChartOptions:{series:[{data:[]}],noData:{text:"No data available",align:"center",verticalAlign:"middle",offsetX:0,offsetY:0,style:{color:"#686868",fontSize:"18px"}},chart:{type:"area",height:350,stacked:!1,toolbar:{show:!1,offsetX:-10,offsetY:10,tools:{download:!1,selection:!0,zoom:!0,zoomin:!0,zoomout:!0,pan:!1,reset:!0}},zoom:{enabled:!1,allowMouseWheelZoom:!1}},stroke:{curve:"straight",dashArray:6,width:2},fill:{type:"gradient",gradient:{inverseColors:!1,opacityFrom:.55,opacityTo:.05,stops:[10,100]}},markers:{size:5,colors:["#fff"],strokeColors:"#7880CA",strokeWidth:2,hover:{size:6}},colors:["#7880CA"],dataLabels:{enabled:!1},grid:{show:!0,borderColor:"#D8D8D8",strokeDashArray:5,position:"back",xaxis:{lines:{show:!0,offsetX:60,style:{dashArray:5}}},yaxis:{lines:{show:!1}}},xaxis:{axisTicks:{show:!1},axisBorder:{show:!0,color:"#D8D8D8",height:1},tooltip:{enabled:!1}},tooltip:{enabled:!0,theme:!1,custom:function(t){t.series;t=t.w.globals.initialSeries[t.seriesIndex].data[t.dataPointIndex];return'\n                        <div class="arrow-box-aov">\n                            <div class="box-title">'.concat(merchant_analytics.labels.orders_aov,'</div>\n                            <div class="box-value">').concat(t.number_currency,' <span class="diff ').concat(t.diff_type,'">').concat(t.difference,"%</span></div>\n                        </div>")}}},sendAjaxRequest:(c=_asyncToGenerator(_regeneratorRuntime().mark(function t(e){var a,n,r=arguments;return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=1<r.length&&void 0!==r[1]?r[1]:"",n=2<r.length&&void 0!==r[2]?r[2]:"GET",t.prev=2,a&&l(a).addClass("show"),t.next=6,l.ajax({url:this.AJAX_URL,method:n,data:e});case 6:return t.abrupt("return",t.sent);case 9:throw t.prev=9,t.t0=t.catch(2),console.error("AJAX request failed:",t.t0),t.t0;case 13:return t.prev=13,a&&l(a).removeClass("show"),t.finish(13);case 16:case"end":return t.stop()}},t,this,[[2,9,13,16]])})),function(t){return c.apply(this,arguments)}),prepareAjaxData:function(t,e,a){return{action:t,nonce:this.NONCE,start_date:e,end_date:a,compare_start_date:3<arguments.length&&void 0!==arguments[3]?arguments[3]:"",compare_end_date:4<arguments.length&&void 0!==arguments[4]?arguments[4]:""}},updateImpressionsChart:(s=_asyncToGenerator(_regeneratorRuntime().mark(function t(e){var a,n;return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=_slicedToArray(e.formattedDate,2),n=a[0],a=a[1],t.prev=1,t.next=4,this.sendAjaxRequest(this.prepareAjaxData("merchant_get_impressions_chart_data",n,a),".impressions-chart-section .merchant-analytics-loading-spinner");case 4:(n=t.sent).success&&this.impressionsChart.updateSeries([{data:n.data}]),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.error("Error fetching impressions data:",t.t0);case 11:case"end":return t.stop()}},t,this,[[1,8]])})),function(t){return s.apply(this,arguments)}),updateRevenueChart:(i=_asyncToGenerator(_regeneratorRuntime().mark(function t(e){var a,n;return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=_slicedToArray(e.formattedDate,2),n=a[0],a=a[1],t.prev=1,t.next=4,this.sendAjaxRequest(this.prepareAjaxData("merchant_get_revenue_chart_data",n,a),".revenue-chart-section .merchant-analytics-loading-spinner");case 4:(n=t.sent).success&&this.revenueChart.updateSeries([{data:n.data}]),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.error("Error fetching revenue data:",t.t0);case 11:case"end":return t.stop()}},t,this,[[1,8]])})),function(t){return i.apply(this,arguments)}),updateAOVChart:(o=_asyncToGenerator(_regeneratorRuntime().mark(function t(e){var a,n;return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=_slicedToArray(e.formattedDate,2),n=a[0],a=a[1],t.prev=1,t.next=4,this.sendAjaxRequest(this.prepareAjaxData("merchant_get_avg_order_value_chart_data",n,a),".aov-chart-section .merchant-analytics-loading-spinner");case 4:(n=t.sent).success&&this.avgOrderValChart.updateSeries([{data:n.data}]),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.error("Error fetching AOV data:",t.t0);case 11:case"end":return t.stop()}},t,this,[[1,8]])})),function(t){return o.apply(this,arguments)}),updateOverviewCards:(r=_asyncToGenerator(_regeneratorRuntime().mark(function t(e){var a;return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.sendAjaxRequest(this.prepareAjaxData(l(".merchant-analytics-overview-section").attr("data-action"),e.startDate,e.endDate,e.compareStartDate,e.compareEndDate),".merchant-analytics-overview-section .merchant-analytics-loading-spinner");case 3:(a=t.sent).success&&this.updateCardsWithData(a.data),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error("Error fetching cards data:",t.t0);case 10:case"end":return t.stop()}},t,this,[[0,7]])})),function(t){return r.apply(this,arguments)}),updateCardsWithData:function(t){l(".merchant-analytics-overview-section").find(".overview-cards").html(t)},updatePerformingCampaignsTable:(a=_asyncToGenerator(_regeneratorRuntime().mark(function t(e){var a;return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.sendAjaxRequest(this.prepareAjaxData("merchant_get_top_performing_campaigns_table_data",e.startDate,e.endDate,"",""),".merchant-analytics-overview-section .merchant-analytics-loading-spinner");case 3:(a=t.sent).success&&this.updateTopCampaignsWithData(a.data,e.container),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error("Error fetching cards data:",t.t0);case 10:case"end":return t.stop()}},t,this,[[0,7]])})),function(t){return a.apply(this,arguments)}),updateAllCampaignsTable:(e=_asyncToGenerator(_regeneratorRuntime().mark(function t(e){var a;return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.sendAjaxRequest(this.prepareAjaxData("merchant_get_all_campaigns_table_data",e.startDate,e.endDate,"",""),".merchant-page-campaigns .merchant-analytics-loading-spinner");case 3:(a=t.sent).success&&(this.updateAllCampaignsWithData(a.data,e.container),this.populateFilterSelect(e.container)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error("Error fetching cards data:",t.t0);case 10:case"end":return t.stop()}},t,this,[[0,7]])})),function(t){return e.apply(this,arguments)}),updateTopCampaignsWithData:function(t,e){var a=e.find("tbody");e.find("table th").removeClass("asc desc"),a.empty(),l.each(t,function(t,e){e="\n\t\t            <tr>\n\t\t                <td>".concat(e.campaign_info.module_name,": ").concat(e.campaign_info.campaign_title,"</td>\n\t\t                <td>").concat(e.impressions,"</td>\n\t\t                <td>").concat(e.clicks,'</td>\n\t\t                <td class="ctr">').concat(e.ctr,"</td>\n\t\t                <td>").concat(e.orders,"</td>\n\t\t                <td>").concat(e.revenue,"</td>\n\t\t            </tr>\n\t\t        ");l(a).append(e)})},updateAllCampaignsWithData:function(t,e){var o=[],a=e.find("tbody"),i=(a.empty(),e.find("table th").removeClass("asc desc"),e.find(".js-campaign-search").val(""),e.find(".no-results-message").hide(),0),e=e.find(".js-pagination"),s=parseInt(e.attr("data-rows-per-page"));l.each(t,function(a,n){var r=n.module_id;0<n.campaigns.length&&n.campaigns.forEach(function(t,e){i++;var e="".concat(r,"-campaign-").concat(a,"-").concat(e);o.push('\n\t\t\t\t            <tr\n\t\t\t\t            \tclass="'.concat(s<i?"is-hidden":"",'"\n\t\t\t\t            \t').concat(s<i?'style="display: none;"':"",'\n\t\t\t\t                data-module-id="').concat(r,'"\n\t\t\t\t                data-campaign-key="').concat(t.campaign_key,'"\n\t\t\t\t                data-campaign-id="').concat(t.campaign_id,'"\n\t\t\t\t                data-row-count="').concat(i,'">\n\t\t\t\t                <td><input type="checkbox" name="campaign_select[]" value="').concat(t.title,'" /></td>\n\t\t\t\t                <td class="merchant__campaign-name js-campaign-name">').concat(t.title,'</td>\n\t\t\t\t                <td class="merchant__module-name js-module-name" data-module-id="').concat(n.module_id,'">').concat(n.module_name,'</td>\n\t\t\t\t                <td class="merchant__status merchant-module-page-setting-field-switcher js-status">\n\t\t\t\t                    ').concat("active"===t.status||"inactive"===t.status?'<div class="merchant-toggle-switch">\n\t\t\t\t\t\t\t\t                <input type="checkbox" id="'.concat(e,'" name="merchant[').concat(e,']" value="').concat("active"===t.status?"1":"",'" ').concat("active"===t.status?"checked ":"",'class="toggle-switch-checkbox">\n\t\t\t\t\t\t\t\t                <label class="toggle-switch-label" for="').concat(e,'">\n\t\t\t\t\t\t\t\t                    <span class="toggle-switch-inner"></span>\n\t\t\t\t\t\t\t\t                    <span class="toggle-switch-switch"></span>\n\t\t\t\t\t\t\t\t                </label>\n\t\t\t\t\t\t\t\t\t\t\t</div>'):"-",'\n\t\t\t\t                </td>\n\t\t\t\t                <td class="merchant__impressions">').concat(t.impression,'</td>\n\t\t\t\t                <td class="merchant__clicks">').concat(t.clicks,'</td>\n\t\t\t\t                <td class="merchant__revenue">').concat(null!=(e=t.revenue)?e:"-",'</td>\n\t\t\t\t                <td class="merchant__ctr">').concat(t.ctr,'</td>\n\t\t\t\t                <td class="merchant__orders">').concat(t.orders,'</td>\n\t\t\t\t                <td class="merchant__edit">\n\t\t\t\t                    <a href="').concat(n.edit_url||"#",'" target="_blank">\n\t\t\t\t                        <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none">\n\t\t\t\t                            <path d="M8.30399 1.00174C8.90067 0.405063 9.8596 0.405063 10.4563 1.00174L10.7333 1.27876C11.33 1.87543 11.33 2.83437 10.7333 3.43104L6.51398 7.65037C6.3435 7.82085 6.10909 7.97001 5.85338 8.03394L3.7224 8.65192C3.55193 8.69454 3.36014 8.65192 3.23228 8.50276C3.08311 8.3749 3.04049 8.18311 3.08311 8.01263L3.70109 5.88166C3.76502 5.62594 3.91419 5.39154 4.08467 5.22106L8.30399 1.00174ZM9.73175 1.72627C9.53996 1.53448 9.22031 1.53448 9.02852 1.72627L8.38923 2.34425L9.39079 3.3458L10.0088 2.70651C10.2006 2.51473 10.2006 2.19508 10.0088 2.00329L9.73175 1.72627ZM4.68134 6.15869L4.31908 7.41596L5.57635 7.0537C5.66159 7.03239 5.72552 6.98977 5.78945 6.92584L8.66626 4.04903L7.68601 3.06878L4.8092 5.94559C4.74527 6.00952 4.70265 6.07345 4.68134 6.15869ZM4.61741 1.83281C4.89444 1.83281 5.12885 2.06722 5.12885 2.34425C5.12885 2.64258 4.89444 2.85568 4.61741 2.85568H2.23072C1.7406 2.85568 1.37834 3.23926 1.37834 3.70807V9.50431C1.37834 9.99444 1.7406 10.3567 2.23072 10.3567H8.02697C8.49578 10.3567 8.87936 9.99444 8.87936 9.50431V7.11763C8.87936 6.8406 9.09245 6.60619 9.39079 6.60619C9.66782 6.60619 9.90222 6.8406 9.90222 7.11763V9.50431C9.90222 10.5485 9.04983 11.3796 8.02697 11.3796H2.23072C1.18655 11.3796 0.355469 10.5485 0.355469 9.50431V3.70807C0.355469 2.6852 1.18655 1.83281 2.23072 1.83281H4.61741Z" fill="#565865"/>\n\t\t\t\t                        </svg>\n\t\t\t\t                        Edit\n\t\t\t\t                    </a>\n\t\t\t\t                </td>\n\t\t\t\t            </tr>\n\t\t\t\t        '))})}),l(a).append(o.join("")),this.updatePaginationButtons(1,parseInt(e.attr("data-total-pages-initial")),parseInt(e.attr("data-total-rows-initial")))},datePickerInit:function(t,e){var n=e.onSelectHandler,r=e.datePickerArgs,e=t.find(".date-range-input");e.length&&e.each(function(){var t=l(this),e=t.val(),a=[],e=(e&&(a=e.split(" - ").map(function(t){return new Date(t.trim())})),_objectSpread(_objectSpread({},{maxDate:new Date,locale:JSON.parse(merchant_datepicker_locale),range:!0,position:"bottom right",dateFormat:"MM/dd/yy",selectedDates:a,multipleDatesSeparator:" - ",onSelect:function(t){"function"==typeof n&&n(t)}}),r));new AirDatepicker(t.get(0),e)})},initOverviewCards:function(){var a=this,n=l(".merchant-analytics-overview-section");this.datePickerInit(n,{onSelectHandler:function(){var t=n.find(".first-date-range .date-range-input"),e=n.find(".second-date-range .date-range-input"),t=t.val().split(" - ").map(function(t){return t.trim()}),e=e.val().split(" - ").map(function(t){return t.trim()});2===t.length&&2===e.length&&a.updateOverviewCards({startDate:t[0],endDate:t[1],compareStartDate:e[0],compareEndDate:e[1]})}})},renderChart:function(t,e,a,n){var r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{},o=t.find(".chart");if(o.length)return(e=new ApexCharts(o.get(0),e)).render(),e.updateSeries([{data:JSON.parse(o.attr("data-period"))}]),this.datePickerInit(t,{onSelectHandler:function(t){2===t.formattedDate.length&&a(t)},datePickerArgs:r}),e},widgetChartRender:function(){var e=this,t=l(".widget-chart-section"),a=l("body").hasClass("rtl");d.revenueChart=this.renderChart(t,this.widgetChartOptions,function(t){return e.updateRevenueChart(t)},".widget-chart-section .merchant-analytics-loading-spinner",{position:a?"top right":"top left"})},revenueChartRender:function(){var e=this,t=l(".revenue-chart-section");t.length&&(this.revenueChart=this.renderChart(t,this.revenueChartOptions,function(t){return e.updateRevenueChart(t)},".revenue-chart-section .merchant-analytics-loading-spinner"))},avgOrderValChartRender:function(){var e=this,t=l(".aov-chart-section");t.length&&(this.avgOrderValChart=this.renderChart(t,this.avgOrderValChartOptions,function(t){return e.updateAOVChart(t)},".aov-chart-section .merchant-analytics-loading-spinner"))},impressionsChartRender:function(){var e=this,t=l(".impressions-chart-section");t.length&&(this.impressionsChart=this.renderChart(t,this.columnChartOptions,function(t){return e.updateImpressionsChart(t)},".impressions-chart-section .merchant-analytics-loading-spinner"))},initTopCampaignsTable:function(){var e=l(".merchant-analytics-section.campaigns-table"),a=this;e.length&&(this.datePickerInit(e,{onSelectHandler:function(){var t=e.find(".first-date-range .date-range-input").val().split(" - ").map(function(t){return t.trim()});2===t.length&&a.updatePerformingCampaignsTable({startDate:t[0],endDate:t[1],container:e})},datePickerArgs:{position:"top right"}}),this.setupSortableTableEventListeners(e))},initAllCampaignsTable:function(){var e=l(".merchant-analytics-section.all-campaigns-table"),a=this;e.length&&(this.datePickerInit(e,{onSelectHandler:function(){var t=e.find(".first-date-range .date-range-input").val().split(" - ").map(function(t){return t.trim()});2===t.length&&a.updateAllCampaignsTable({startDate:t[0],endDate:t[1],container:e})}}),a.setupSortableTableEventListeners(e),a.populateFilterSelect(e))},populateFilterSelect:function(t){var t=t.find(".js-campaigns-table"),a=l(".filter-campaign select"),n=(l(a).find("option:not(:first)").remove(),[]);l(t).find("tr .js-module-name").each(function(){var e=l(this).attr("data-module-id"),t=l(this).text().trim();e&&!n.some(function(t){return t.value===e})&&n.push({value:e,label:t})}),n.sort(),l.each(n,function(t,e){l(a).append(l("<option>",{value:e.value,text:e.label}))})},setupSortableTableEventListeners:function(e){var r=this,o=(e.find("th:not(.no-sort)").on("click",function(t){r.sortableTable(l(t.currentTarget),e)}),l(".js-campaigns-table")),t=l(".js-campaign-search"),a=l(".js-filter-module"),n=l(".js-bulk-action"),i=l(".js-pagination");o.find('thead th:first-child input[type="checkbox"]').on("change",function(){var t=l(this).prop("checked");o.find('tbody tr:not(.is-hidden) input[type="checkbox"]:not(.toggle-switch-checkbox)').prop("checked",t)}),o.on("change",'.js-status input[type="checkbox"]',function(){var t=l(this),e=t.closest("tr"),e=_defineProperty({},e.attr("data-module-id"),{campaign_key:e.attr("data-campaign-key"),campaigns:[{campaign_id:e.attr("data-campaign-id"),status:t.prop("checked")?"active":"inactive"}]});r.updateCampaignStatus(e,t,[t],!0)}),n.on("click",function(t){t.preventDefault();var a,n=l(this).closest(".bulk-action").find("select").val();n?(t=o.find('tbody tr:not(.is-hidden) input[type="checkbox"]:not(.toggle-switch-checkbox):checked')).length?(a={},t.each(function(){var t=l(this).closest("tr"),e=t.attr("data-module-id");a[e]||(a[e]={campaign_key:t.attr("data-campaign-key"),campaigns:[]}),a[e].campaigns.push({campaign_id:t.attr("data-campaign-id"),status:n})}),r.updateCampaignStatus(a,l(this),t)):alert("Please select campaigns."):alert("Please select an action.")}),t.on("input",r.debounce(function(){r.filterTableTable(a.val(),o,l(this).val())},300)),a.on("change",function(){r.filterTableTable(l(this).val(),o,""),t.val("")}),i.on("click",".pagination-button",function(t){t.preventDefault();var t=parseInt(l(this).attr("data-current-page")),e=parseInt(l(this).attr("data-page"));isNaN(e)||e===t||(r.paginateRows(t=e,o.find("tbody tr")),r.updatePaginationButtons(t))})},sortableTable:function(t,e){var n=t.index(),r=t.data("sort"),o=t.hasClass("asc")?"desc":"asc",t=(e.find("th").removeClass("asc desc"),t.addClass(o),e.find("tbody")),e=t.find("tr").toArray();e.sort(function(t,e){var a,t=l(t).find("td").eq(n).text(),e=l(e).find("td").eq(n).text(),t="int"===r?(a=parseInt(t.replace(/[^0-9]/g,""),10),parseInt(e.replace(/[^0-9]/g,""),10)):"float"===r?(a=parseFloat(t.replace(/[^0-9.]/g,"")),parseFloat(e.replace(/[^0-9.]/g,""))):(a=t,e);return"asc"==o?a<t?-1:t<a?1:0:t<a?-1:a<t?1:0}),t.append(e)},filterTableTable:function(r,t){var o,e,a,n,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"";t.length&&(o=0,(e=t.find("tbody tr")).each(function(){var t=l(this),e=t.attr("data-module-id"),a=t.find(".js-campaign-name").text().toLowerCase(),n=t.find(".js-module-name").text().toLowerCase(),e=!r||e===r,a=!i||a.includes(i)||n.includes(i);e&&a?(t.show().removeClass("filtered-out is-hidden"),o++):t.hide().addClass("filtered-out")}),a=o,n=parseInt(t.closest(".merchant-page-campaigns").find(".js-pagination").attr("data-rows-per-page")),n=Math.max(1,Math.ceil(a/n)),this.paginateRows(1,e),this.updateNoResults(0===o,t),this.updatePaginationButtons(1,n,a))},paginateRows:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,e=1<arguments.length?arguments[1]:void 0,a=l(".js-pagination"),a=parseInt(a.attr("data-rows-per-page")),n=(t-1)*a,r=n+a;e.hide().addClass("is-hidden"),e.filter(":not(.filtered-out)").each(function(t){n<=t&&t<r&&l(this).show().removeClass("is-hidden")})},updateNoResults:function(t,e){var a=e.next(".no-results-message");t?(a.length||(a=l('<div class="no-results-message" style="">No matching campaigns found</div>'),e.after(a)),a.show()):a.length&&a.hide()},updatePaginationButtons:function(t,e,a){var n=l(".js-pagination"),r=(n.attr("data-current-page",t),e&&n.attr("data-total-pages",e),a&&n.attr("data-total-rows",a),e=parseInt(n.attr("data-total-pages")),"");if(1<t&&(r+='\n\t\t          <button class="pagination-button prev-page" data-page="'.concat(t-1,'">\n\t\t            <svg xmlns="http://www.w3.org/2000/svg" width="7" height="12" viewBox="0 0 7 12" fill="#565865">\n\t\t              <path d="M5.16797 11.3301L0.521484 6.48047C0.394531 6.32812 0.34375 6.17578 0.34375 6.02344C0.34375 5.89648 0.394531 5.74414 0.496094 5.61719L5.14258 0.767578C5.37109 0.513672 5.77734 0.513672 6.00586 0.742188C6.25977 0.970703 6.25977 1.35156 6.03125 1.60547L1.79102 6.02344L6.05664 10.4922C6.28516 10.7207 6.28516 11.127 6.03125 11.3555C5.80273 11.584 5.39648 11.584 5.16797 11.3301Z"/>\n\t\t            </svg>\n\t\t          </button>\n\t\t\t\t')),1<e)for(var o=1;o<=e;o++)r+='\n          \t\t\t<button class="pagination-button'.concat(o===t?" pagination-active":"",'" data-page="').concat(o,'">').concat(o,"</button>\n\t\t\t\t");t<e&&(r+='\n\t\t          <button class="pagination-button next-page" data-page="'.concat(t+1,'">\n\t\t            <svg xmlns="http://www.w3.org/2000/svg" width="7" height="12" viewBox="0 0 7 12" fill="#565865">\n\t\t              <path d="M1.80664 0.742188L6.45312 5.5918C6.55469 5.71875 6.63086 5.87109 6.63086 6.02344C6.63086 6.17578 6.55469 6.32812 6.45312 6.42969L1.80664 11.2793C1.57812 11.5332 1.17188 11.5332 0.943359 11.3047C0.689453 11.0762 0.689453 10.6953 0.917969 10.4414L5.18359 5.99805L0.917969 1.58008C0.689453 1.35156 0.689453 0.945312 0.943359 0.716797C1.17188 0.488281 1.57812 0.488281 1.80664 0.742188Z"/>\n\t\t            </svg>\n\t\t          </button>\n\t\t\t\t')),n.html(r);var i,s,c=l(".js-pagination-results");1<e?(i=parseInt(n.attr("data-total-rows")),n=(s=(t-1)*(n=parseInt(n.attr("data-rows-per-page"))))+n,c.find(".pagination-start-row").text(s||1),c.find(".pagination-end-row").text(i<n?i:n),c.find(".pagination-total-rows").text(a),c.show()):c.hide()},updateCampaignStatus:(n=_asyncToGenerator(_regeneratorRuntime().mark(function t(e,a,n){var r,o,i,s,c=arguments;return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=3<c.length&&void 0!==c[3]&&c[3],o=this,i=a.closest(".all-campaigns-table").find(".js-campaigns-table"),s='<span class="spinner is-active"></span>',a.prop("disabled",!0),r?(a.closest(".merchant-toggle-switch").append(s),a.closest("tr").css("opacity",".7")):(i.css("opacity",".7"),a.closest(".bulk-action").append(s)),t.prev=6,t.next=9,this.sendAjaxRequest({action:"merchant_update_campaign_status",nonce:o.NONCE,campaign_data:e},"","POST").then(function(t){t.success&&(r||null!=n&&n.each(function(){l(this).closest("tr").find('.js-status input[type="checkbox"]').prop("checked","active"===t.data.status)}),l(document).trigger("merchant_campaign_status_updated",[t.data,a,n,r,e])),l(".spinner").remove(),a.prop("disabled",!1),(r?a.closest("tr"):(null!=n&&n.each(function(){i.find('thead th:first-child input[type="checkbox"]').prop("checked",!1),l(this).prop("checked",!1)}),i)).css("opacity","")});case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(6),console.error("Error fetching campaign status data:",t.t0);case 14:case"end":return t.stop()}},t,this,[[6,11]])})),function(t,e,a){return n.apply(this,arguments)}),debounce:function(r,o){var i;return function(){for(var t=this,e=arguments.length,a=new Array(e),n=0;n<e;n++)a[n]=arguments[n];clearTimeout(i),i=setTimeout(function(){return r.apply(t,a)},o)}}};l(document).ready(function(){d.initOverviewCards(),d.widgetChartRender(),d.revenueChartRender(),d.avgOrderValChartRender(),d.impressionsChartRender(),d.initTopCampaignsTable(),d.initAllCampaignsTable()})})(jQuery);